2025/09/18 10:58:46 - INFO - __main__ - 配置文件: contrastive_learning\configs\default_config.yaml
2025/09/18 10:58:46 - INFO - __main__ - 微调模型路径: .\output\best_model
2025/09/18 10:58:46 - INFO - __main__ - 测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/18 10:58:46 - INFO - __main__ - 验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/18 10:58:46 - INFO - __main__ - 评估模型: finetuned_codet5
2025/09/18 10:58:46 - INFO - __main__ - 使用均值池化策略对所有模型进行评估
2025/09/18 10:58:46 - INFO - __main__ - 仅使用编码器输出（不使用投影头）
2025/09/18 10:58:46 - INFO - __main__ - 使用设备: cuda
2025/09/18 10:58:46 - INFO - __main__ - 加载测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/18 10:58:55 - INFO - __main__ - 测试样本数量: 5998
2025/09/18 10:58:55 - INFO - __main__ - 加载验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/18 10:58:55 - INFO - __main__ - 验证集样本数量: 3000
2025/09/18 10:58:55 - INFO - __main__ - 加载模型: finetuned_codet5 (微调后的CodeT5模型)
2025/09/18 10:59:03 - INFO - evaluate - 检测到PEFT适配器，加载PEFT模型
2025/09/18 10:59:03 - INFO - evaluate - 基础模型: Salesforce/codet5-base
2025/09/18 10:59:28 - ERROR - __main__ - 评估模型 finetuned_codet5 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /Salesforce/codet5-base/resolve/main/model.safetensors (Caused by ProxyError('Unable to connect to proxy', NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x000001D8071F1990>: Failed to establish a new connection: [WinError 10061] 由于目标计算机积极拒绝，无法连接。')))"), '(Request ID: e339741b-0ab8-4e70-8d86-ef091dd25847)')
2025/09/18 10:59:28 - INFO - __main__ - 生成模型比较报告...
2025/09/18 10:59:28 - INFO - __main__ - 评估结果已保存至目录: contrastive_learning\results\noq_finetuned
2025/09/18 11:01:54 - INFO - __main__ - 配置文件: contrastive_learning\configs\default_config.yaml
2025/09/18 11:01:54 - INFO - __main__ - 微调模型路径: .\output\best_model
2025/09/18 11:01:54 - INFO - __main__ - 测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/18 11:01:54 - INFO - __main__ - 验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/18 11:01:54 - INFO - __main__ - 评估模型: finetuned_codet5
2025/09/18 11:01:54 - INFO - __main__ - 使用均值池化策略对所有模型进行评估
2025/09/18 11:01:54 - INFO - __main__ - 仅使用编码器输出（不使用投影头）
2025/09/18 11:01:54 - INFO - __main__ - 使用设备: cuda
2025/09/18 11:01:54 - INFO - __main__ - 加载测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/18 11:01:54 - INFO - __main__ - 测试样本数量: 5998
2025/09/18 11:01:54 - INFO - __main__ - 加载验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/18 11:01:54 - INFO - __main__ - 验证集样本数量: 3000
2025/09/18 11:01:54 - INFO - __main__ - 加载模型: finetuned_codet5 (微调后的CodeT5模型)
2025/09/18 11:01:54 - INFO - evaluate - 检测到PEFT适配器，加载PEFT模型
2025/09/18 11:01:54 - INFO - evaluate - 基础模型: Salesforce/codet5-base
2025/09/18 11:03:24 - INFO - __main__ - 验证集最佳阈值 (finetuned_codet5): -1.000
2025/09/18 11:03:24 - INFO - __main__ - 验证集指标 (finetuned_codet5):
2025/09/18 11:03:24 - INFO - __main__ -   accuracy: 0.6043
2025/09/18 11:03:24 - INFO - __main__ -   precision: 0.6043
2025/09/18 11:03:24 - INFO - __main__ -   recall: 1.0000
2025/09/18 11:03:24 - INFO - __main__ -   f1: 0.7534
2025/09/18 11:03:24 - INFO - __main__ -   auc: 0.0157
2025/09/18 11:03:24 - INFO - __main__ - 使用验证集阈值 -1.000 评估 finetuned_codet5
2025/09/18 11:05:15 - INFO - __main__ - 模型 finetuned_codet5 (微调后的CodeT5模型) 评估结果:
2025/09/18 11:05:15 - INFO - __main__ - 最佳阈值: -1.000
2025/09/18 11:05:15 - INFO - __main__ -   accuracy: 0.5043
2025/09/18 11:05:15 - INFO - __main__ -   precision: 0.5043
2025/09/18 11:05:15 - INFO - __main__ -   recall: 1.0000
2025/09/18 11:05:15 - INFO - __main__ -   f1: 0.6705
2025/09/18 11:05:15 - INFO - __main__ -   auc: 0.0111
2025/09/18 11:05:15 - INFO - __main__ - 相似度分数分布 (finetuned_codet5):
2025/09/18 11:05:15 - INFO - __main__ -   最小值: 0.0678
2025/09/18 11:05:15 - INFO - __main__ -   最大值: 1.0000
2025/09/18 11:05:15 - INFO - __main__ -   平均值: 0.9119
2025/09/18 11:05:15 - INFO - __main__ -   标准差: 0.1616
2025/09/18 11:05:15 - INFO - __main__ -   分位数: {'10%': 0.6706967413425446, '25%': 0.9066534489393234, '50%': 0.9967530965805054, '75%': 0.9996773302555084, '90%': 0.9998838901519775}
2025/09/18 11:05:15 - INFO - __main__ - 生成模型比较报告...
2025/09/18 11:05:15 - INFO - __main__ - 评估结果已保存至目录: contrastive_learning\results\noq_finetuned
