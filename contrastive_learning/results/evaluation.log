2025/09/11 17:07:07 - INFO - __main__ - 配置文件: contrastive_learning/configs/default_config.yaml
2025/09/11 17:07:07 - INFO - __main__ - 微调模型路径: ./output/best_model
2025/09/11 17:07:07 - INFO - __main__ - 测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/11 17:07:07 - INFO - __main__ - 验证数据集: contrastive_learning/datasets/csn_java/valid_augmented_pairs.jsonl
2025/09/11 17:07:07 - INFO - __main__ - 评估模型: finetuned_codet5, base_codet5, codebert, graphcodebert
2025/09/11 17:07:07 - INFO - __main__ - 启用4位量化 (QLoRA)
2025/09/11 17:07:07 - INFO - __main__ - 使用均值池化策略对所有模型进行评估
2025/09/11 17:07:07 - INFO - __main__ - 仅使用编码器输出（不使用投影头）
2025/09/11 17:07:07 - INFO - __main__ - 使用设备: cuda
2025/09/11 17:07:07 - INFO - __main__ - 加载测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/11 17:07:08 - INFO - __main__ - 测试样本数量: 5998
2025/09/11 17:07:08 - INFO - __main__ - 加载验证数据集: contrastive_learning/datasets/csn_java/valid_augmented_pairs.jsonl
2025/09/11 17:07:08 - INFO - __main__ - 验证集样本数量: 3000
2025/09/11 17:07:08 - INFO - __main__ - 加载模型: finetuned_codet5 (微调后的CodeT5模型)
2025/09/11 17:07:09 - INFO - evaluate - 检测到PEFT适配器，加载PEFT模型
2025/09/11 17:07:09 - INFO - evaluate - 基础模型: Salesforce/codet5-base
2025/09/11 17:07:12 - INFO - accelerate.utils.modeling - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025/09/11 17:08:12 - INFO - __main__ - 验证集最佳阈值 (finetuned_codet5): -1.000
2025/09/11 17:08:12 - INFO - __main__ - 验证集指标 (finetuned_codet5):
2025/09/11 17:08:12 - INFO - __main__ -   accuracy: 0.6043
2025/09/11 17:08:12 - INFO - __main__ -   precision: 0.6043
2025/09/11 17:08:12 - INFO - __main__ -   recall: 1.0000
2025/09/11 17:08:12 - INFO - __main__ -   f1: 0.7534
2025/09/11 17:08:12 - INFO - __main__ -   auc: 0.0193
2025/09/11 17:08:12 - INFO - __main__ - 使用验证集阈值 -1.000 评估 finetuned_codet5
2025/09/11 17:09:40 - INFO - __main__ - 模型 finetuned_codet5 (微调后的CodeT5模型) 评估结果:
2025/09/11 17:09:40 - INFO - __main__ - 最佳阈值: -1.000
2025/09/11 17:09:40 - INFO - __main__ -   accuracy: 0.5043
2025/09/11 17:09:40 - INFO - __main__ -   precision: 0.5043
2025/09/11 17:09:40 - INFO - __main__ -   recall: 1.0000
2025/09/11 17:09:40 - INFO - __main__ -   f1: 0.6705
2025/09/11 17:09:40 - INFO - __main__ -   auc: 0.0138
2025/09/11 17:09:40 - INFO - __main__ - 相似度分数分布 (finetuned_codet5):
2025/09/11 17:09:40 - INFO - __main__ -   最小值: 0.8382
2025/09/11 17:09:40 - INFO - __main__ -   最大值: 1.0000
2025/09/11 17:09:40 - INFO - __main__ -   平均值: 0.9835
2025/09/11 17:09:40 - INFO - __main__ -   标准差: 0.0284
2025/09/11 17:09:40 - INFO - __main__ -   分位数: {'10%': 0.9398590981960296, '25%': 0.9798213541507721, '50%': 0.9989004731178284, '75%': 0.9998906850814819, '90%': 0.999963003396988}
2025/09/11 17:09:40 - INFO - __main__ - 加载模型: base_codet5 (原始未微调的CodeT5模型)
2025/09/11 17:11:00 - INFO - accelerate.utils.modeling - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025/09/11 17:11:50 - INFO - __main__ - 验证集最佳阈值 (base_codet5): -1.000
2025/09/11 17:11:50 - INFO - __main__ - 验证集指标 (base_codet5):
2025/09/11 17:11:50 - INFO - __main__ -   accuracy: 0.6043
2025/09/11 17:11:50 - INFO - __main__ -   precision: 0.6043
2025/09/11 17:11:50 - INFO - __main__ -   recall: 1.0000
2025/09/11 17:11:50 - INFO - __main__ -   f1: 0.7534
2025/09/11 17:11:50 - INFO - __main__ -   auc: 0.0116
2025/09/11 17:11:50 - INFO - __main__ - 使用验证集阈值 -1.000 评估 base_codet5
2025/09/11 17:12:59 - INFO - __main__ - 模型 base_codet5 (原始未微调的CodeT5模型) 评估结果:
2025/09/11 17:12:59 - INFO - __main__ - 最佳阈值: -1.000
2025/09/11 17:12:59 - INFO - __main__ -   accuracy: 0.5043
2025/09/11 17:12:59 - INFO - __main__ -   precision: 0.5043
2025/09/11 17:12:59 - INFO - __main__ -   recall: 1.0000
2025/09/11 17:12:59 - INFO - __main__ -   f1: 0.6705
2025/09/11 17:12:59 - INFO - __main__ -   auc: 0.0078
2025/09/11 17:12:59 - INFO - __main__ - 相似度分数分布 (base_codet5):
2025/09/11 17:12:59 - INFO - __main__ -   最小值: 0.3571
2025/09/11 17:12:59 - INFO - __main__ -   最大值: 1.0000
2025/09/11 17:12:59 - INFO - __main__ -   平均值: 0.9474
2025/09/11 17:12:59 - INFO - __main__ -   标准差: 0.0792
2025/09/11 17:12:59 - INFO - __main__ -   分位数: {'10%': 0.833198857307434, '25%': 0.9142272174358368, '50%': 0.9936104714870453, '75%': 0.9991542100906372, '90%': 0.9997586488723755}
2025/09/11 17:12:59 - INFO - __main__ - 加载模型: codebert (原始CodeBERT模型)
2025/09/11 17:13:23 - INFO - __main__ - 加载CodeBERT模型 (均值池化版本)
2025/09/11 17:13:47 - WARNING - huggingface_hub.file_download - Xet Storage is enabled for this repo, but the 'hf_xet' package is not installed. Falling back to regular HTTP download. For better performance, install the package with: `pip install huggingface_hub[hf_xet]` or `pip install hf_xet`
2025/09/11 17:14:05 - ERROR - __main__ - 评估模型 codebert 时出错: (ReadTimeoutError("HTTPSConnectionPool(host='cas-bridge.xethub.hf.co', port=443): Read timed out. (read timeout=10)"), '(Request ID: 3fa2a628-3e11-478e-b450-18b1dd4e9474)')
2025/09/11 17:14:05 - INFO - __main__ - 加载模型: graphcodebert (原始GraphCodeBERT模型)
2025/09/11 17:14:29 - INFO - __main__ - 加载GraphCodeBERT模型 (均值池化版本)
2025/09/11 17:14:53 - WARNING - huggingface_hub.file_download - Xet Storage is enabled for this repo, but the 'hf_xet' package is not installed. Falling back to regular HTTP download. For better performance, install the package with: `pip install huggingface_hub[hf_xet]` or `pip install hf_xet`
2025/09/11 17:15:11 - ERROR - __main__ - 评估模型 graphcodebert 时出错: (ReadTimeoutError("HTTPSConnectionPool(host='cas-bridge.xethub.hf.co', port=443): Read timed out. (read timeout=10)"), '(Request ID: edc1a9c7-440b-460a-8c19-19f818e9c504)')
2025/09/11 17:15:11 - INFO - __main__ - 生成模型比较报告...
2025/09/11 17:15:11 - INFO - __main__ - 评估结果已保存至目录: contrastive_learning/results
2025/09/16 09:15:34 - INFO - __main__ - 配置文件: contrastive_learning\configs\default_config.yaml
2025/09/16 09:15:34 - INFO - __main__ - 微调模型路径: .\output\best_model
2025/09/16 09:15:34 - INFO - __main__ - 测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/16 09:15:34 - INFO - __main__ - 验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/16 09:15:34 - INFO - __main__ - 评估模型: finetuned_codet5, base_codet5, codebert, graphcodebert
2025/09/16 09:15:34 - INFO - __main__ - 启用4位量化 (QLoRA)
2025/09/16 09:15:34 - INFO - __main__ - 使用均值池化策略对所有模型进行评估
2025/09/16 09:15:34 - INFO - __main__ - 仅使用编码器输出（不使用投影头）
2025/09/16 09:15:34 - INFO - __main__ - 使用设备: cuda
2025/09/16 09:15:34 - INFO - __main__ - 加载测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/16 09:15:34 - INFO - __main__ - 测试样本数量: 5998
2025/09/16 09:15:34 - INFO - __main__ - 加载验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/16 09:15:34 - INFO - __main__ - 验证集样本数量: 3000
2025/09/16 09:15:34 - INFO - __main__ - 加载模型: finetuned_codet5 (微调后的CodeT5模型)
2025/09/16 09:15:34 - INFO - evaluate - 检测到PEFT适配器，加载PEFT模型
2025/09/16 09:15:34 - INFO - evaluate - 基础模型: Salesforce/codet5-base
2025/09/16 09:15:35 - ERROR - __main__ - 评估模型 finetuned_codet5 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /Salesforce/codet5-base/resolve/main/model.safetensors (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))"), '(Request ID: 8cd3976c-3aeb-4583-b32a-548a6a657626)')
2025/09/16 09:15:36 - INFO - __main__ - 加载模型: base_codet5 (原始未微调的CodeT5模型)
2025/09/16 09:15:36 - ERROR - __main__ - 评估模型 base_codet5 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /Salesforce/codet5-base/resolve/main/model.safetensors (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))"), '(Request ID: 9a1c2291-ac71-4944-9e6a-a1a170ae2003)')
2025/09/16 09:15:36 - INFO - __main__ - 加载模型: codebert (原始CodeBERT模型)
2025/09/16 09:15:37 - INFO - __main__ - 加载CodeBERT模型 (均值池化版本)
2025/09/16 09:15:37 - ERROR - __main__ - 评估模型 codebert 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /microsoft/codebert-base/resolve/main/pytorch_model.bin (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))"), '(Request ID: 3088c77d-efa8-4364-a60a-d3f4d5311fef)')
2025/09/16 09:15:37 - INFO - __main__ - 加载模型: graphcodebert (原始GraphCodeBERT模型)
2025/09/16 09:15:37 - INFO - __main__ - 加载GraphCodeBERT模型 (均值池化版本)
2025/09/16 09:15:38 - ERROR - __main__ - 评估模型 graphcodebert 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /microsoft/graphcodebert-base/resolve/main/pytorch_model.bin (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))"), '(Request ID: 5837a7e7-a2eb-44e9-8f5d-d0f58ec22dc8)')
2025/09/16 09:15:38 - INFO - __main__ - 生成模型比较报告...
2025/09/16 09:15:38 - INFO - __main__ - 评估结果已保存至目录: contrastive_learning\results
2025/09/16 11:18:17 - INFO - __main__ - 配置文件: contrastive_learning\configs\default_config.yaml
2025/09/16 11:18:17 - INFO - __main__ - 微调模型路径: .\output\best_model
2025/09/16 11:18:17 - INFO - __main__ - 测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/16 11:18:17 - INFO - __main__ - 验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/16 11:18:17 - INFO - __main__ - 评估模型: finetuned_codet5, base_codet5, codebert, graphcodebert
2025/09/16 11:18:17 - INFO - __main__ - 启用4位量化 (QLoRA)
2025/09/16 11:18:17 - INFO - __main__ - 使用均值池化策略对所有模型进行评估
2025/09/16 11:18:17 - INFO - __main__ - 仅使用编码器输出（不使用投影头）
2025/09/16 11:18:17 - INFO - __main__ - 使用设备: cuda
2025/09/16 11:18:17 - INFO - __main__ - 加载测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/16 11:24:23 - INFO - __main__ - 配置文件: contrastive_learning\configs\default_config.yaml
2025/09/16 11:24:23 - INFO - __main__ - 微调模型路径: .\output\best_model
2025/09/16 11:24:23 - INFO - __main__ - 测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/16 11:24:23 - INFO - __main__ - 验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/16 11:24:23 - INFO - __main__ - 评估模型: finetuned_codet5, base_codet5, codebert, graphcodebert
2025/09/16 11:24:23 - INFO - __main__ - 启用4位量化 (QLoRA)
2025/09/16 11:24:23 - INFO - __main__ - 使用均值池化策略对所有模型进行评估
2025/09/16 11:24:24 - INFO - __main__ - 仅使用编码器输出（不使用投影头）
2025/09/16 11:24:24 - INFO - __main__ - 使用设备: cuda
2025/09/16 11:24:24 - INFO - __main__ - 加载测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/18 10:10:36 - INFO - __main__ - 配置文件: contrastive_learning\configs\default_config.yaml
2025/09/18 10:10:36 - INFO - __main__ - 微调模型路径: .\output\best_model
2025/09/18 10:10:36 - INFO - __main__ - 测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/18 10:10:36 - INFO - __main__ - 验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/18 10:10:36 - INFO - __main__ - 评估模型: finetuned_codet5, base_codet5, codebert, graphcodebert
2025/09/18 10:10:36 - INFO - __main__ - 启用4位量化 (QLoRA)
2025/09/18 10:10:36 - INFO - __main__ - 使用均值池化策略对所有模型进行评估
2025/09/18 10:10:36 - INFO - __main__ - 仅使用编码器输出（不使用投影头）
2025/09/18 10:10:36 - INFO - __main__ - 使用设备: cuda
2025/09/18 10:10:36 - INFO - __main__ - 加载测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/18 10:10:37 - INFO - __main__ - 测试样本数量: 5998
2025/09/18 10:10:37 - INFO - __main__ - 加载验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/18 10:10:37 - INFO - __main__ - 验证集样本数量: 3000
2025/09/18 10:10:37 - INFO - __main__ - 加载模型: finetuned_codet5 (微调后的CodeT5模型)
2025/09/18 10:10:37 - INFO - evaluate - 检测到PEFT适配器，加载PEFT模型
2025/09/18 10:10:37 - INFO - evaluate - 基础模型: Salesforce/codet5-base
2025/09/18 10:10:38 - ERROR - __main__ - 评估模型 finetuned_codet5 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /Salesforce/codet5-base/resolve/main/model.safetensors (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))"), '(Request ID: a4337fd4-bc84-4142-aa0b-b4300c7ec4d4)')
2025/09/18 10:10:38 - INFO - __main__ - 加载模型: base_codet5 (原始未微调的CodeT5模型)
2025/09/18 10:10:39 - ERROR - __main__ - 评估模型 base_codet5 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /Salesforce/codet5-base/resolve/main/model.safetensors (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))"), '(Request ID: 641ecd79-976a-477a-b15b-91f6895eed25)')
2025/09/18 10:10:39 - INFO - __main__ - 加载模型: codebert (原始CodeBERT模型)
2025/09/18 10:10:40 - INFO - __main__ - 加载CodeBERT模型 (均值池化版本)
2025/09/18 10:10:40 - ERROR - __main__ - 评估模型 codebert 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /microsoft/codebert-base/resolve/main/pytorch_model.bin (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))"), '(Request ID: 330950c7-a7c5-4517-a72f-b98d7ecc7893)')
2025/09/18 10:10:40 - INFO - __main__ - 加载模型: graphcodebert (原始GraphCodeBERT模型)
2025/09/18 10:10:40 - INFO - __main__ - 加载GraphCodeBERT模型 (均值池化版本)
2025/09/18 10:10:41 - ERROR - __main__ - 评估模型 graphcodebert 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /microsoft/graphcodebert-base/resolve/main/pytorch_model.bin (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))"), '(Request ID: 6d24c3de-6410-4cd0-a8c1-652bcb483e9c)')
2025/09/18 10:10:41 - INFO - __main__ - 生成模型比较报告...
2025/09/18 10:10:41 - INFO - __main__ - 评估结果已保存至目录: contrastive_learning\results
2025/09/18 10:29:42 - INFO - __main__ - 配置文件: contrastive_learning\configs\default_config.yaml
2025/09/18 10:29:42 - INFO - __main__ - 微调模型路径: .\output\best_model
2025/09/18 10:29:42 - INFO - __main__ - 测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/18 10:29:42 - INFO - __main__ - 验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/18 10:29:42 - INFO - __main__ - 评估模型: finetuned_codet5, base_codet5, codebert, graphcodebert
2025/09/18 10:29:42 - INFO - __main__ - 启用4位量化 (QLoRA)
2025/09/18 10:29:42 - INFO - __main__ - 使用均值池化策略对所有模型进行评估
2025/09/18 10:29:42 - INFO - __main__ - 仅使用编码器输出（不使用投影头）
2025/09/18 10:29:42 - INFO - __main__ - 使用设备: cuda
2025/09/18 10:29:42 - INFO - __main__ - 加载测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/18 10:29:50 - INFO - __main__ - 测试样本数量: 5998
2025/09/18 10:29:50 - INFO - __main__ - 加载验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/18 10:29:50 - INFO - __main__ - 验证集样本数量: 3000
2025/09/18 10:29:50 - INFO - __main__ - 加载模型: finetuned_codet5 (微调后的CodeT5模型)
2025/09/18 10:29:58 - INFO - evaluate - 检测到PEFT适配器，加载PEFT模型
2025/09/18 10:29:58 - INFO - evaluate - 基础模型: Salesforce/codet5-base
2025/09/18 10:30:23 - ERROR - __main__ - 评估模型 finetuned_codet5 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /Salesforce/codet5-base/resolve/main/model.safetensors (Caused by ProxyError('Unable to connect to proxy', NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x00000210072A4490>: Failed to establish a new connection: [WinError 10061] 由于目标计算机积极拒绝，无法连接。')))"), '(Request ID: 818452b0-e262-4271-b654-7cb7e4fdcaa9)')
2025/09/18 10:30:23 - INFO - __main__ - 加载模型: base_codet5 (原始未微调的CodeT5模型)
2025/09/18 10:30:48 - ERROR - __main__ - 评估模型 base_codet5 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /Salesforce/codet5-base/resolve/main/model.safetensors (Caused by ProxyError('Unable to connect to proxy', NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x0000021009EE7090>: Failed to establish a new connection: [WinError 10061] 由于目标计算机积极拒绝，无法连接。')))"), '(Request ID: aed789a7-7140-4a39-9109-457c4d0ae169)')
2025/09/18 10:30:48 - INFO - __main__ - 加载模型: codebert (原始CodeBERT模型)
2025/09/18 10:30:56 - INFO - __main__ - 加载CodeBERT模型 (均值池化版本)
2025/09/18 10:31:04 - ERROR - __main__ - 评估模型 codebert 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /microsoft/codebert-base/resolve/main/pytorch_model.bin (Caused by ProxyError('Unable to connect to proxy', NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x000002100722FE50>: Failed to establish a new connection: [WinError 10061] 由于目标计算机积极拒绝，无法连接。')))"), '(Request ID: 8a68d03c-99e3-426e-b357-694149d71bf0)')
2025/09/18 10:31:04 - INFO - __main__ - 加载模型: graphcodebert (原始GraphCodeBERT模型)
2025/09/18 10:31:13 - INFO - __main__ - 加载GraphCodeBERT模型 (均值池化版本)
2025/09/18 10:31:21 - ERROR - __main__ - 评估模型 graphcodebert 时出错: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /microsoft/graphcodebert-base/resolve/main/pytorch_model.bin (Caused by ProxyError('Unable to connect to proxy', NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x0000021006AE8FD0>: Failed to establish a new connection: [WinError 10061] 由于目标计算机积极拒绝，无法连接。')))"), '(Request ID: d3a239b6-f627-4227-ac1f-e75729831d9c)')
2025/09/18 10:31:21 - INFO - __main__ - 生成模型比较报告...
2025/09/18 10:31:21 - INFO - __main__ - 评估结果已保存至目录: contrastive_learning\results
2025/09/18 10:38:49 - INFO - __main__ - 配置文件: contrastive_learning\configs\default_config.yaml
2025/09/18 10:38:49 - INFO - __main__ - 微调模型路径: .\output\best_model
2025/09/18 10:38:49 - INFO - __main__ - 测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/18 10:38:49 - INFO - __main__ - 验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/18 10:38:49 - INFO - __main__ - 评估模型: finetuned_codet5, base_codet5, codebert, graphcodebert
2025/09/18 10:38:49 - INFO - __main__ - 启用4位量化 (QLoRA)
2025/09/18 10:38:49 - INFO - __main__ - 使用均值池化策略对所有模型进行评估
2025/09/18 10:38:49 - INFO - __main__ - 仅使用编码器输出（不使用投影头）
2025/09/18 10:38:49 - INFO - __main__ - 使用设备: cuda
2025/09/18 10:38:49 - INFO - __main__ - 加载测试数据集: contrastive_learning/datasets/csn_java/test_augmented_pairs.jsonl
2025/09/18 10:38:49 - INFO - __main__ - 测试样本数量: 5998
2025/09/18 10:38:49 - INFO - __main__ - 加载验证数据集: contrastive_learning\datasets\csn_java\valid_augmented_pairs.jsonl
2025/09/18 10:38:49 - INFO - __main__ - 验证集样本数量: 3000
2025/09/18 10:38:49 - INFO - __main__ - 加载模型: finetuned_codet5 (微调后的CodeT5模型)
2025/09/18 10:38:49 - INFO - evaluate - 检测到PEFT适配器，加载PEFT模型
2025/09/18 10:38:49 - INFO - evaluate - 基础模型: Salesforce/codet5-base
2025/09/18 10:38:50 - INFO - accelerate.utils.modeling - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025/09/18 10:39:48 - INFO - __main__ - 验证集最佳阈值 (finetuned_codet5): -1.000
2025/09/18 10:39:48 - INFO - __main__ - 验证集指标 (finetuned_codet5):
2025/09/18 10:39:48 - INFO - __main__ -   accuracy: 0.6043
2025/09/18 10:39:48 - INFO - __main__ -   precision: 0.6043
2025/09/18 10:39:48 - INFO - __main__ -   recall: 1.0000
2025/09/18 10:39:48 - INFO - __main__ -   f1: 0.7534
2025/09/18 10:39:48 - INFO - __main__ -   auc: 0.0150
2025/09/18 10:39:48 - INFO - __main__ - 使用验证集阈值 -1.000 评估 finetuned_codet5
2025/09/18 10:41:15 - INFO - __main__ - 模型 finetuned_codet5 (微调后的CodeT5模型) 评估结果:
2025/09/18 10:41:15 - INFO - __main__ - 最佳阈值: -1.000
2025/09/18 10:41:15 - INFO - __main__ -   accuracy: 0.5043
2025/09/18 10:41:15 - INFO - __main__ -   precision: 0.5043
2025/09/18 10:41:15 - INFO - __main__ -   recall: 1.0000
2025/09/18 10:41:15 - INFO - __main__ -   f1: 0.6705
2025/09/18 10:41:15 - INFO - __main__ -   auc: 0.0104
2025/09/18 10:41:15 - INFO - __main__ - 相似度分数分布 (finetuned_codet5):
2025/09/18 10:41:15 - INFO - __main__ -   最小值: 0.0289
2025/09/18 10:41:15 - INFO - __main__ -   最大值: 1.0000
2025/09/18 10:41:15 - INFO - __main__ -   平均值: 0.9121
2025/09/18 10:41:15 - INFO - __main__ -   标准差: 0.1619
2025/09/18 10:41:15 - INFO - __main__ -   分位数: {'10%': 0.6750417649745941, '25%': 0.9066539853811264, '50%': 0.9969565272331238, '75%': 0.9997021853923798, '90%': 0.9998914003372192}
2025/09/18 10:41:15 - INFO - __main__ - 加载模型: base_codet5 (原始未微调的CodeT5模型)
2025/09/18 10:41:15 - INFO - accelerate.utils.modeling - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025/09/18 10:42:04 - INFO - __main__ - 验证集最佳阈值 (base_codet5): -1.000
2025/09/18 10:42:04 - INFO - __main__ - 验证集指标 (base_codet5):
2025/09/18 10:42:04 - INFO - __main__ -   accuracy: 0.6043
2025/09/18 10:42:04 - INFO - __main__ -   precision: 0.6043
2025/09/18 10:42:04 - INFO - __main__ -   recall: 1.0000
2025/09/18 10:42:04 - INFO - __main__ -   f1: 0.7534
2025/09/18 10:42:04 - INFO - __main__ -   auc: 0.0116
2025/09/18 10:42:04 - INFO - __main__ - 使用验证集阈值 -1.000 评估 base_codet5
2025/09/18 10:43:11 - INFO - __main__ - 模型 base_codet5 (原始未微调的CodeT5模型) 评估结果:
2025/09/18 10:43:11 - INFO - __main__ - 最佳阈值: -1.000
2025/09/18 10:43:11 - INFO - __main__ -   accuracy: 0.5043
2025/09/18 10:43:11 - INFO - __main__ -   precision: 0.5043
2025/09/18 10:43:11 - INFO - __main__ -   recall: 1.0000
2025/09/18 10:43:11 - INFO - __main__ -   f1: 0.6705
2025/09/18 10:43:11 - INFO - __main__ -   auc: 0.0078
2025/09/18 10:43:11 - INFO - __main__ - 相似度分数分布 (base_codet5):
2025/09/18 10:43:11 - INFO - __main__ -   最小值: 0.3571
2025/09/18 10:43:11 - INFO - __main__ -   最大值: 1.0000
2025/09/18 10:43:11 - INFO - __main__ -   平均值: 0.9474
2025/09/18 10:43:11 - INFO - __main__ -   标准差: 0.0792
2025/09/18 10:43:11 - INFO - __main__ -   分位数: {'10%': 0.833198857307434, '25%': 0.9142272174358368, '50%': 0.9936104714870453, '75%': 0.9991542100906372, '90%': 0.9997586488723755}
2025/09/18 10:43:11 - INFO - __main__ - 加载模型: codebert (原始CodeBERT模型)
2025/09/18 10:43:11 - INFO - __main__ - 加载CodeBERT模型 (均值池化版本)
2025/09/18 10:43:56 - INFO - __main__ - 验证集最佳阈值 (codebert): -1.000
2025/09/18 10:43:56 - INFO - __main__ - 验证集指标 (codebert):
2025/09/18 10:43:56 - INFO - __main__ -   accuracy: 0.6043
2025/09/18 10:43:56 - INFO - __main__ -   precision: 0.6043
2025/09/18 10:43:56 - INFO - __main__ -   recall: 1.0000
2025/09/18 10:43:56 - INFO - __main__ -   f1: 0.7534
2025/09/18 10:43:56 - INFO - __main__ -   auc: 0.0103
2025/09/18 10:43:56 - INFO - __main__ - 使用验证集阈值 -1.000 评估 codebert
2025/09/18 10:44:59 - INFO - __main__ - 模型 codebert (原始CodeBERT模型) 评估结果:
2025/09/18 10:44:59 - INFO - __main__ - 最佳阈值: -1.000
2025/09/18 10:44:59 - INFO - __main__ -   accuracy: 0.5043
2025/09/18 10:44:59 - INFO - __main__ -   precision: 0.5043
2025/09/18 10:44:59 - INFO - __main__ -   recall: 1.0000
2025/09/18 10:44:59 - INFO - __main__ -   f1: 0.6705
2025/09/18 10:44:59 - INFO - __main__ -   auc: 0.0059
2025/09/18 10:44:59 - INFO - __main__ - 相似度分数分布 (codebert):
2025/09/18 10:44:59 - INFO - __main__ -   最小值: 0.8982
2025/09/18 10:44:59 - INFO - __main__ -   最大值: 1.0000
2025/09/18 10:44:59 - INFO - __main__ -   平均值: 0.9923
2025/09/18 10:44:59 - INFO - __main__ -   标准差: 0.0133
2025/09/18 10:44:59 - INFO - __main__ -   分位数: {'10%': 0.9755377829074859, '25%': 0.9897953122854233, '50%': 0.9993641078472137, '75%': 0.9999650716781616, '90%': 0.999990701675415}
2025/09/18 10:44:59 - INFO - __main__ - 加载模型: graphcodebert (原始GraphCodeBERT模型)
2025/09/18 10:44:59 - INFO - __main__ - 加载GraphCodeBERT模型 (均值池化版本)
2025/09/18 10:45:44 - INFO - __main__ - 验证集最佳阈值 (graphcodebert): -1.000
2025/09/18 10:45:44 - INFO - __main__ - 验证集指标 (graphcodebert):
2025/09/18 10:45:44 - INFO - __main__ -   accuracy: 0.6043
2025/09/18 10:45:44 - INFO - __main__ -   precision: 0.6043
2025/09/18 10:45:44 - INFO - __main__ -   recall: 1.0000
2025/09/18 10:45:44 - INFO - __main__ -   f1: 0.7534
2025/09/18 10:45:44 - INFO - __main__ -   auc: 0.0205
2025/09/18 10:45:44 - INFO - __main__ - 使用验证集阈值 -1.000 评估 graphcodebert
2025/09/18 10:46:47 - INFO - __main__ - 模型 graphcodebert (原始GraphCodeBERT模型) 评估结果:
2025/09/18 10:46:47 - INFO - __main__ - 最佳阈值: -1.000
2025/09/18 10:46:47 - INFO - __main__ -   accuracy: 0.5043
2025/09/18 10:46:47 - INFO - __main__ -   precision: 0.5043
2025/09/18 10:46:47 - INFO - __main__ -   recall: 1.0000
2025/09/18 10:46:47 - INFO - __main__ -   f1: 0.6705
2025/09/18 10:46:47 - INFO - __main__ -   auc: 0.0158
2025/09/18 10:46:47 - INFO - __main__ - 相似度分数分布 (graphcodebert):
2025/09/18 10:46:47 - INFO - __main__ -   最小值: 0.7308
2025/09/18 10:46:47 - INFO - __main__ -   最大值: 1.0000
2025/09/18 10:46:47 - INFO - __main__ -   平均值: 0.9805
2025/09/18 10:46:47 - INFO - __main__ -   标准差: 0.0344
2025/09/18 10:46:47 - INFO - __main__ -   分位数: {'10%': 0.9422006368637085, '25%': 0.9741422235965729, '50%': 0.9970765709877014, '75%': 0.9997974187135696, '90%': 0.9999421417713166}
2025/09/18 10:46:47 - INFO - __main__ - 生成模型比较报告...
2025/09/18 10:46:47 - INFO - __main__ - 评估结果已保存至目录: contrastive_learning\results
